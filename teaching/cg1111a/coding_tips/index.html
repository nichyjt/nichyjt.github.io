<!doctype html><html lang=en-sg><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Embedded Programming Tips | Nicholas Yek</title><meta name=description content="Here are some guidelines and tips to make your embedded code more readable and robust for CG1111A.
"><link rel=canonical href=https://nichyjt.github.io/teaching/cg1111a/coding_tips/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/mainmenu.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/colours.css><link rel=stylesheet href=/css/pagenav.css><link rel=stylesheet href=/css/homepage.css><link rel=stylesheet href=/css/featured.css><link rel=stylesheet href=/css/shortcodes.css><link rel=stylesheet href=/css/badgeicon.css><script src=/js/accordian.js></script>
<script src=/js/spoiler.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:title" content="Embedded Programming Tips"><meta property="og:description" content="Here are some guidelines and tips to make your embedded code more readable and robust for CG1111A.
"><meta property="og:type" content="article"><meta property="og:url" content="https://nichyjt.github.io/teaching/cg1111a/coding_tips/"><meta property="article:section" content="teaching"><meta property="article:published_time" content="2023-10-13T00:00:00+00:00"><meta property="article:modified_time" content="2023-10-13T00:00:00+00:00"><meta property="og:image" content="https://nichyjt.github.io/favicon_main.png"><meta name=twitter:card content="summary"><meta name=twitter:title content="Embedded Programming Tips"><meta name=twitter:description content="Here are some guidelines and tips to make your embedded code more readable and robust for CG1111A.
"><script>localStorage.getItem("theme")||localStorage.setItem("theme","lightmode")</script></head><body><div class=navcontainer><body><nav class=navbar><div class=home-item><a href=https://nichyjt.github.io class=home-link><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" class="svg-inline--fa fa-home fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M280.37 148.26 96 300.11V464a16 16 0 0016 16l112.06-.29a16 16 0 0015.92-16V368a16 16 0 0116-16h64a16 16 0 0116 16v95.64a16 16 0 0016 16.05L464 480a16 16 0 0016-16V3e2L295.67 148.26a12.19 12.19.0 00-15.3.0zM571.6 251.47 488 182.56V44.05a12 12 0 00-12-12h-56a12 12 0 00-12 12v72.61L318.47 43a48 48 0 00-61 0L4.34 251.47a12 12 0 00-1.6 16.9l25.5 31A12 12 0 0045.15 301l235.22-193.74a12.19 12.19.0 0115.3.0L530.9 301a12 12 0 0016.9-1.6l25.5-31a12 12 0 00-1.7-16.93z"/></svg><span class=home-text>HOME</span></a></div><ul class=navbar-large><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/about , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="address-card" class="svg-inline--fa fa-address-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M528 32H48C21.5 32 0 53.5.0 80v352c0 26.5 21.5 48 48 48h480c26.5.0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 4e2H48V80h480v352zM208 256c35.3.0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4.0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8.0-18.7 8-44.8 8-26.9.0-33.4-8-44.8-8-37.1.0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2zM360 320h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8z"></path></svg><span class=menu-item-text>ABOUT</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/essays , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen" class="svg-inline--fa fa-pen fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06-60.11-60.11c-18.75-18.75-49.16-18.75-67.91.0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16.0-67.91z"></path></svg><span class=menu-item-text>ESSAYS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/projects , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="robot" class="svg-inline--fa fa-robot fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M32 224H64V416H32A31.96166 31.96166.0 010 384V256a31.96166 31.96166.0 0132-32zm512-48V448a64.06328 64.06328.0 01-64 64H160a64.06328 64.06328.0 01-64-64V176a79.974 79.974.0 0180-80H288V32a32 32 0 0164 0V96H464a79.974 79.974.0 0180 80zM264 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H192v32h64zm96 0H288v32h64zM456 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H384v32h64zM640 256V384a31.96166 31.96166.0 01-32 32H576V224h32a31.96166 31.96166.0 0132 32z"></path></svg><span class=menu-item-text>PROJECTS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/tags , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"></path></svg><span class=menu-item-text>TAGS</span></a></button></li><li class=nav-item><button id=darkmode-toggle , style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item , onclick=changetheme()>
<a class=menu-item , style=text-decoration:underline><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="adjust" class="svg-inline--fa fa-adjust fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class=menu-item-text>DARKMODE</span></a></button>
<script>function changetheme(){document.body.className.includes("darkmode")?(document.body.classList.replace("darkmode","lightmode"),localStorage.setItem("theme","lightmode")):(document.body.classList.replace("lightmode","darkmode"),localStorage.setItem("theme","darkmode")),document.activeElement.blur()}</script></li></ul><div class=navbar-mobile><button class=hamburg-btn><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M16 132h416c8.837.0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163.0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></button><ul class=navbar-hamburg-items><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/about , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="address-card" class="svg-inline--fa fa-address-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M528 32H48C21.5 32 0 53.5.0 80v352c0 26.5 21.5 48 48 48h480c26.5.0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 4e2H48V80h480v352zM208 256c35.3.0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4.0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8.0-18.7 8-44.8 8-26.9.0-33.4-8-44.8-8-37.1.0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2zM360 320h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8z"></path></svg><span class=menu-item-text>ABOUT</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/essays , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen" class="svg-inline--fa fa-pen fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06-60.11-60.11c-18.75-18.75-49.16-18.75-67.91.0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16.0-67.91z"></path></svg><span class=menu-item-text>ESSAYS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/projects , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="robot" class="svg-inline--fa fa-robot fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M32 224H64V416H32A31.96166 31.96166.0 010 384V256a31.96166 31.96166.0 0132-32zm512-48V448a64.06328 64.06328.0 01-64 64H160a64.06328 64.06328.0 01-64-64V176a79.974 79.974.0 0180-80H288V32a32 32 0 0164 0V96H464a79.974 79.974.0 0180 80zM264 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H192v32h64zm96 0H288v32h64zM456 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H384v32h64zM640 256V384a31.96166 31.96166.0 01-32 32H576V224h32a31.96166 31.96166.0 0132 32z"></path></svg><span class=menu-item-text>PROJECTS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/tags , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"></path></svg><span class=menu-item-text>TAGS</span></a></button></li><li class=nav-item><button id=darkmode-toggle , style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item , onclick=changetheme()>
<a class=menu-item , style=text-decoration:underline><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="adjust" class="svg-inline--fa fa-adjust fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class=menu-item-text>DARKMODE</span></a></button>
<script>function changetheme(){document.body.className.includes("darkmode")?(document.body.classList.replace("darkmode","lightmode"),localStorage.setItem("theme","lightmode")):(document.body.classList.replace("lightmode","darkmode"),localStorage.setItem("theme","darkmode")),document.activeElement.blur()}</script></li></ul></div></nav></body></div><div class=bodycontainer><main><section class=section><div class=frontmatter><h1 class="title, listTitleLink">Embedded Programming Tips</h1><div class=subtitle><p><time>üìÜ October 13, 2023</time>
|
‚åõ 6 minutes read</p></div><p class=tags>üìã Tags:</p></div><hr><div class=content><h1 id=overall-guidelines>Overall Guidelines</h1><p>The overall guideline is very similar to your lab report. Prioritize being <strong>explicit</strong> and <strong>clear</strong>. As you do more team coding projects like <a href=https://orbital.comp.nus.edu.sg/>Orbital</a> or <a href=https://nusmods.com/courses/CS2113/software-engineering-object-oriented-programming>CS2113</a>, you will experience firsthand why this matters.</p><p>Apart from the specific tips I will showcase later, your standard good coding practices apply.</p><p>Make sure your code is <strong><a href=https://stackoverflow.com/questions/5600257/factoring-refactoring-a-program>well-factored</a></strong> and <strong>commented</strong> so that your peers (and yourself) don&rsquo;t forget what your code is supposed to do.</p><figure class=figmd><img src=https://img.ifunny.co/images/1e737f22fdb4cfb2ed2eff870f8fc1b425b86ce2a1dd54aa51fc1f8158be496d_1.webp alt class=figsmall><figcaption>Document your code, please</figcaption></figure><p>Remember: Software engineering is not just getting things to work but is also an <strong>exercise in communication</strong>.</p><p>If you need a code review, please feel free to ping me on telegram for a consult.</p><p>The following tips are tailored for your CG1111A project to hopefully make the development experience less painful.</p><p>If you can apply some of these concepts in your project, I think you will find that they will pay dividends down the road (especially when you get caught in debugging/testing hell).</p><h1 id=cg1111a-coding-tips>CG1111A Coding Tips</h1><h2 id=1-use-structs-to-handle-complex-data-groupings>1. Use Structs to handle complex data groupings</h2><p>Structs are powerful. They unlock all sorts of data structures, and can help make your code more robust and readable.</p><p>How?</p><p>Let&rsquo;s say I&rsquo;m writing code to control a drone&rsquo;s roll, pitch and yaw.</p><figure class=figmd><img src=https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdGJnbXFuOTVlbDNxbnpqZDB6bjNoc2p2MnY3dDk5ODdiNDV6MDV3diZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26h0p7LTBWxsxqXgQ/giphy.gif alt class=fignormal></figure><p>We will need to store the roll, pitch and yaw as config.</p><p>The simplest way is to use an integer array.</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#78787e>// Which is roll, pitch and yaw? 
</span></span></span><span style=display:flex><span><span style=color:#78787e></span><span style=color:#9aedfe>int</span> drone_params[] <span style=color:#ff6ac1>=</span> {<span style=color:#ff9f43>42</span>, <span style=color:#ff9f43>100</span>, <span style=color:#ff9f43>254</span>}; <span style=color:#78787e>// dummy values
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>
</span></span><span style=display:flex><span>drone_params[<span style=color:#ff9f43>0</span>] <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_pitch</span>();
</span></span><span style=display:flex><span>drone_params[<span style=color:#ff9f43>1</span>] <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_roll</span>();
</span></span><span style=display:flex><span>drone_params[<span style=color:#ff9f43>2</span>] <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_yaw</span>();
</span></span></code></pre></td></tr></table></div></div><p>But, when we use <code>drone_params</code>, it&rsquo;s not immediately clear what <code>0,1,2</code> mean in this context.</p><p>We can <strong>infer</strong> that <code>drone_params[0] == pitch</code> and so on. But is it really? Only the person who wrote the line of code knows.</p><p>Other people who read it will be confused and won&rsquo;t really be able to work on the project. We also run the risk of index errors <del>if</del> when we accidentally use 1-based indexing (e.g. <code>drone_params[3]</code>)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>What if we used a <code>struct</code> instead?</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#ff6ac1>struct</span> FlightParams {
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>int</span> roll;
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>int</span> pitch;
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>int</span> yaw;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>struct</span> FlightParams drone_params;
</span></span><span style=display:flex><span>drone_params.pitch <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_pitch</span>();
</span></span><span style=display:flex><span>drone_params.roll <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_roll</span>();
</span></span><span style=display:flex><span>drone_params.yaw <span style=color:#ff6ac1>=</span> <span style=color:#57c7ff>read_input_yaw</span>();
</span></span></code></pre></td></tr></table></div></div><p>Much better. This type of readability is especially good if you are inheriting someone else&rsquo;s code. Instead of magical values like <code>0,1,2</code>, anyone that reads it will know exactly what&rsquo;s going on.</p><p>Accessing data using descriptive names with structs helps to reduce human error and helps you develop faster. No need to scroll up and down to figure out what 0,1,2 refers to.</p><p><strong>When to use structs?</strong></p><p>When you have related pieces of data tightly coupled to each other and their state needs to be changed.</p><h2 id=2-pass-by-reference>2. Pass by reference</h2><p>You may find that your program might run a tad bit slower<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> if you are passing structs or classes. This is because your program in Arduino (C++ variant) passes function arguments by value.</p><p>This means that passing a struct or class as an argument will COPY the data structure. You should be aware of this in CS1010.</p><p>Copying can be slow<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>. C++ (which Arduino uses) has a feature called &ldquo;Pass by reference&rdquo; (no more pointers!). Do this by appending &lsquo;&&rsquo; before the argument name. You can think of pass by reference as a &lsquo;pseudo pointer&rsquo;, where the actual variable is passed into the function rather than copying it. This saves you time and is useful when you need to actually modify the data. You will find this concept particularly useful in CS2040C.</p><p>Any modifications made to the referenced variable in the function will persist once the function call ends.</p><p><a href=https://www.geeksforgeeks.org/passing-by-pointer-vs-passing-by-reference-in-cpp/>Reference documentation</a> for pass by reference.</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#ff6ac1>struct</span> <span style=color:#f3f99d>Foo</span> {
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>int</span> bar;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9aedfe>void</span> <span style=color:#57c7ff>func</span>(Foo<span style=color:#ff6ac1>&amp;</span> foo){
</span></span><span style=display:flex><span>    <span style=color:#78787e>// process foo and change its state
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    foo.bar <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>1</span>;
</span></span><span style=display:flex><span>} 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9aedfe>int</span> <span style=color:#57c7ff>main</span>(){
</span></span><span style=display:flex><span>    Foo foo;
</span></span><span style=display:flex><span>    foo.bar <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0</span>;
</span></span><span style=display:flex><span>    printf(<span style=color:#5af78e>&#34;%d </span><span style=color:#5af78e>\n</span><span style=color:#5af78e>&#34;</span>, foo.bar); <span style=color:#78787e>// prints 0
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    func(foo);
</span></span><span style=display:flex><span>    printf(<span style=color:#5af78e>&#34;%d </span><span style=color:#5af78e>\n</span><span style=color:#5af78e>&#34;</span>, foo.bar); <span style=color:#78787e>// prints 1
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=3-avoid-magic-literals>3. Avoid magic literals</h2><p>Magic literals are values that seemingly come out of thin air.</p><p>There is no obvious meaning to its value.</p><p>You will learn this more in-depth later on in <a href=https://nus-cs2113-ay2324s1.github.io/website/se-book-adapted/chapters/codeQuality.html#avoid-magic-numbers>CS2113</a>. But here&rsquo;s a simple example.</p><p>Let&rsquo;s say we need to calculate the resistance of a copper wire.</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#9aedfe>double</span> <span style=color:#57c7ff>calc_wire_resistance</span>(<span style=color:#9aedfe>float</span> length, <span style=color:#9aedfe>float</span> area){
</span></span><span style=display:flex><span>    <span style=color:#78787e>// What does 1.77e-8 represent?
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>return</span> (<span style=color:#ff9f43>1.77e-8</span>) <span style=color:#ff6ac1>*</span> length<span style=color:#ff6ac1>/</span>area;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9aedfe>double</span> <span style=color:#57c7ff>calc_conductivity</span>(){
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> <span style=color:#ff9f43>1</span><span style=color:#ff6ac1>/</span>(<span style=color:#ff9f43>1.77e-8</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>In this case, $1.77*10^{-8}$ is the resistivity of copper. Not obvious at all.</p><blockquote><p>What if we have many functions that need to use the resistivity of copper?<br>What we decide to change the wire to aluminium?<br>How will this affect all the functions that use the literal?</p></blockquote><p>It quickly becomes obvious that magic literals are&mldr;</p><ol><li><strong>Not that readable</strong>, especially for people who didn&rsquo;t write that line of code</li><li><strong>Do not scale</strong> well, especially if frequently used</li></ol><p>Let&rsquo;s refactor the code with a <strong>named constant</strong> (you can opt for a <code>#define</code> macro too).</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#ff6ac1>const</span> <span style=color:#9aedfe>double</span> RESISTIVITY <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>1.77</span><span style=color:#ff6ac1>*</span>(<span style=color:#ff9f43>10e-8</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9aedfe>double</span> <span style=color:#57c7ff>calc_wire_resistance</span>(<span style=color:#9aedfe>float</span> length, <span style=color:#9aedfe>float</span> area){
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> RESISTIVITY<span style=color:#ff6ac1>*</span>length<span style=color:#ff6ac1>/</span>area;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9aedfe>double</span> <span style=color:#57c7ff>calc_conductivity</span>() {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> <span style=color:#ff9f43>1</span><span style=color:#ff6ac1>/</span>RESISTIVITY;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Much better. Need to change to aluminium? No issue, just edit the constant <code>RESISTIVITY</code>. <strong>Re-use</strong> is much easier compared to re-typing the literal&mldr;</p><p>We also avoid possible typos<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> as well. We remove more possible points of failure by using constants and reducing magic literals. Debugging would be much faster as a result! (This saves you time and headaches&mldr;)</p><p>For your mBot project, think about what &lsquo;magic&rsquo; values you may need to tinker around with often.</p><p>These will often be certain &ldquo;configuration&rdquo; variables like angles, speeds, etc&mldr;</p><h2 id=4-enums-help-group-constants>4. Enums help group constants</h2><p>If you have tons of constants, it might get messy.</p><p>You can consider using enums to group together constants that make sense semantically.</p><p><a href=https://www.geeksforgeeks.org/enumeration-in-cpp/>Learn more about C++ enums</a>.</p><div class=highlight><div style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 0
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#ff6ac1>enum</span> <span style=color:#f3f99d>COLORS</span> {
</span></span><span style=display:flex><span>    COLOR_NONE <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0</span>,
</span></span><span style=display:flex><span>    COLOR_RED  <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>1</span>,
</span></span><span style=display:flex><span>    COLOR_GREEN <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>2</span>,
</span></span><span style=display:flex><span>    COLOR_BLUE <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>3</span>,
</span></span><span style=display:flex><span>    COLOR_PURPLE <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>4</span>,
</span></span><span style=display:flex><span>    COLOR_ORANGE <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>5</span>,
</span></span><span style=display:flex><span>    COLOR_WHITE <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>6</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// Sample usage
</span></span></span><span style=display:flex><span><span style=color:#78787e></span><span style=color:#9aedfe>bool</span> <span style=color:#57c7ff>isWhite</span>(<span style=color:#ff6ac1>enum</span> <span style=color:#f3f99d>COLORS</span> color){
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> (color <span style=color:#ff6ac1>==</span> COLOR_WHITE);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=5-avoid-global-variables>5. Avoid Global Variables</h2><p>Global variables are different from global namespace constants or macros. The key difference is that they <em>vary</em>, meaning that their state can change (mutable).</p><p>You learnt from CS1010 (probably) and other sources that global variables are evil. This is the same for CG1111A. Avoid using global, mutable variables.</p><figure class=figmd><img src=https://ievgensaxblog.files.wordpress.com/2018/09/v2pos5d.jpg alt class=figsmall><figcaption>Use global variables if you want to spend more time debugging</figcaption></figure><p>If you choose to use them, you may encounter buggy behaviour with accidental changing of the global variable&rsquo;s state even though the project scope is small. Avoid shooting yourself in the foot!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>This tends to happen. Quite some time can be wasted debugging index issues for CG1111A.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>This should not be that observable, assuming your struct is small.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>If you pass a C++ array <code>vector</code> by value, then you incur a time cost complexity of $O(n)$ where n is the number of elements in the array.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>If I had a dollar every time I had a typo error, I could drop out and gamble in crypto. Ha!&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></div></section></main></div><footer class=footer><div><p class=footertext style=color:#f0f8ff;font-family:MainTitle;align-self:center>Powered by
<a href=https://gohugo.io/ target=_blank style=color:var(--color-link)><span>Hugo</span></a></p></div><div class=footertext style=font-family:MainTitle;align-self:center><a href=https://nichyjt.github.io/attributions/ style=color:var(--color-link)><span>Attributions++</span></a></div><div><p class=footertext class=footertext style=color:#f0f8ff;font-family:MainTitle;align-items:center>Made with ‚ù§Ô∏è - <a href=https://github.com/nichyjt/ target=_blank , style=color:var(--color-link)>nichyjt</a></p></div><div class=footertext style=color:#f0f8ff;font-family:MainTitle;align-self:center>¬© 2021 - 2023 Nicholas Yek</div><div class=fontloader></div></footer></body><script>document.body.classList.add(localStorage.getItem("theme"))</script></html>