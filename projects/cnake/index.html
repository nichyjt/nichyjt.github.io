<!doctype html><html lang=en-sg><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Cnake üêç | Nicholas Yek üßá</title><meta name=description content="Recreating the classic Snake game with C, ncurses and Linked Lists."><link rel=canonical href=https://nichyjt.github.io/projects/cnake/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/mainmenu.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/colours.css><link rel=stylesheet href=/css/pagenav.css><link rel=stylesheet href=/css/homepage.css><link rel=stylesheet href=/css/featured.css><link rel=stylesheet href=/css/shortcodes.css><meta property="og:title" content="Cnake :snake:"><meta property="og:description" content="Recreating the classic Snake game with C, ncurses and Linked Lists."><meta property="og:type" content="article"><meta property="og:url" content="https://nichyjt.github.io/projects/cnake/"><meta property="article:section" content="projects"><meta property="article:published_time" content="2021-08-06T00:00:00+00:00"><meta property="article:modified_time" content="2021-08-06T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cnake :snake:"><meta name=twitter:description content="Recreating the classic Snake game with C, ncurses and Linked Lists."><script>localStorage.getItem("theme")||localStorage.setItem("theme","lightmode")</script></head><body><div class=navcontainer><body><nav class=navbar><div class=home-item><a href=https://nichyjt.github.io class=home-link><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" class="svg-inline--fa fa-home fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M280.37 148.26 96 300.11V464a16 16 0 0016 16l112.06-.29a16 16 0 0015.92-16V368a16 16 0 0116-16h64a16 16 0 0116 16v95.64a16 16 0 0016 16.05L464 480a16 16 0 0016-16V3e2L295.67 148.26a12.19 12.19.0 00-15.3.0zM571.6 251.47 488 182.56V44.05a12 12 0 00-12-12h-56a12 12 0 00-12 12v72.61L318.47 43a48 48 0 00-61 0L4.34 251.47a12 12 0 00-1.6 16.9l25.5 31A12 12 0 0045.15 301l235.22-193.74a12.19 12.19.0 0115.3.0L530.9 301a12 12 0 0016.9-1.6l25.5-31a12 12 0 00-1.7-16.93z"/></svg><span class=home-text>HOME</span></a></div><ul class=navbar-large><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/about , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="address-card" class="svg-inline--fa fa-address-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M528 32H48C21.5 32 0 53.5.0 80v352c0 26.5 21.5 48 48 48h480c26.5.0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 4e2H48V80h480v352zM208 256c35.3.0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4.0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8.0-18.7 8-44.8 8-26.9.0-33.4-8-44.8-8-37.1.0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2zM360 320h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8z"></path></svg><span class=menu-item-text>ABOUT</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/essays , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen" class="svg-inline--fa fa-pen fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06-60.11-60.11c-18.75-18.75-49.16-18.75-67.91.0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16.0-67.91z"></path></svg><span class=menu-item-text>ESSAYS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/projects , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="robot" class="svg-inline--fa fa-robot fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M32 224H64V416H32A31.96166 31.96166.0 010 384V256a31.96166 31.96166.0 0132-32zm512-48V448a64.06328 64.06328.0 01-64 64H160a64.06328 64.06328.0 01-64-64V176a79.974 79.974.0 0180-80H288V32a32 32 0 0164 0V96H464a79.974 79.974.0 0180 80zM264 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H192v32h64zm96 0H288v32h64zM456 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H384v32h64zM640 256V384a31.96166 31.96166.0 01-32 32H576V224h32a31.96166 31.96166.0 0132 32z"></path></svg><span class=menu-item-text>PROJECTS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/tags , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"></path></svg><span class=menu-item-text>TAGS</span></a></button></li><li class=nav-item><button id=darkmode-toggle , style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item , onclick=changetheme()>
<a class=menu-item , style=text-decoration:underline><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="adjust" class="svg-inline--fa fa-adjust fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class=menu-item-text>DARKMODE</span></a></button>
<script>function changetheme(){document.body.className.includes("darkmode")?(document.body.classList.replace("darkmode","lightmode"),localStorage.setItem("theme","lightmode")):(document.body.classList.replace("lightmode","darkmode"),localStorage.setItem("theme","darkmode")),document.activeElement.blur()}</script></li></ul><div class=navbar-mobile><button class=hamburg-btn><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M16 132h416c8.837.0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163.0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></button><ul class=navbar-hamburg-items><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/about , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="address-card" class="svg-inline--fa fa-address-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M528 32H48C21.5 32 0 53.5.0 80v352c0 26.5 21.5 48 48 48h480c26.5.0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 4e2H48V80h480v352zM208 256c35.3.0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4.0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8.0-18.7 8-44.8 8-26.9.0-33.4-8-44.8-8-37.1.0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2zM360 320h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4.0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4.0-8 3.6-8 8v16c0 4.4 3.6 8 8 8z"></path></svg><span class=menu-item-text>ABOUT</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/essays , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen" class="svg-inline--fa fa-pen fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06-60.11-60.11c-18.75-18.75-49.16-18.75-67.91.0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16.0-67.91z"></path></svg><span class=menu-item-text>ESSAYS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/projects , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="robot" class="svg-inline--fa fa-robot fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M32 224H64V416H32A31.96166 31.96166.0 010 384V256a31.96166 31.96166.0 0132-32zm512-48V448a64.06328 64.06328.0 01-64 64H160a64.06328 64.06328.0 01-64-64V176a79.974 79.974.0 0180-80H288V32a32 32 0 0164 0V96H464a79.974 79.974.0 0180 80zM264 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H192v32h64zm96 0H288v32h64zM456 256a40 40 0 10-40 40 39.997 39.997.0 0040-40zm-8 128H384v32h64zM640 256V384a31.96166 31.96166.0 01-32 32H576V224h32a31.96166 31.96166.0 0132 32z"></path></svg><span class=menu-item-text>PROJECTS</span></a></button></li><li class=nav-item><button style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item>
<a href=/tags , class=menu-item><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"></path></svg><span class=menu-item-text>TAGS</span></a></button></li><li class=nav-item><button id=darkmode-toggle , style="cursor:pointer;padding:0;border:none;background:0 0" , class=menu-item , onclick=changetheme()>
<a class=menu-item , style=text-decoration:underline><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="adjust" class="svg-inline--fa fa-adjust fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class=menu-item-text>DARKMODE</span></a></button>
<script>function changetheme(){document.body.className.includes("darkmode")?(document.body.classList.replace("darkmode","lightmode"),localStorage.setItem("theme","lightmode")):(document.body.classList.replace("lightmode","darkmode"),localStorage.setItem("theme","darkmode")),document.activeElement.blur()}</script></li></ul></div></nav></body></div><div class=bodycontainer><main><section class=section><div class=frontmatter><h1 class="title, listTitleLink">Cnake üêç</h1><div class=subtitle><p><time>üìÜ August 6, 2021</time>
| ‚åõ 5 minutes read</p></div><p class=tags>üìã Tags: <a style=color:var(--color-link);margin-inline:.2rem href=https://nichyjt.github.io/tags/c/c++>C/C++</a> <a style=color:var(--color-link);margin-inline:.2rem href=https://nichyjt.github.io/tags/linux>Linux</a> <a style=color:var(--color-link);margin-inline:.2rem href=https://nichyjt.github.io/tags/data-structures>Data Structures</a> <a style=color:var(--color-link);margin-inline:.2rem href=https://nichyjt.github.io/tags/project>Project</a></p></div><hr><div class=content><p>I thought it would be fun to make a one-shot snake game project to familiarise myself with the <code>ncurses</code> library and play around with some data structures, which led to this <a href=https://github.com/nichyjt/cnake>ripoff snake game</a> you can find on my GitHub.</p><figure class=figmd><img src=https://raw.githubusercontent.com/nichyjt/cnake/master/images/demo.gif></figure><p>If you&rsquo;re interested, you can take a look and perhaps give it a go!</p><p>The following sections of this post are just some code discussions for the nerds.</p><h1 id=building-cnake>Building Cnake</h1><p>I won&rsquo;t talk too much about the ncurses library and will be writing more about the things I found interesting while building this project, mainly, these questions I had to answer while making the game.</p><p>How can I track where the snake is?<br>How do I handle input and movement?<br>How do I increase the length of the snake?</p><h2 id=how-can-i-track-where-the-snake-is>How can I track where the snake is?</h2><p>The first thing that came to mind is to use a 2D matrix (<code>int[N][M]</code>) that corresponds to the x,y coodinates of the playing field. We can assign numbers to each array element to represent <em>something</em> such as 0 for empty, 1 for snake, 2 for food, 3 for border, etc.</p><p>On second thought, that&rsquo;s not the fastest way of doing things. If I were to try and figure out where all the &lsquo;Snake&rsquo; cells are, I would have to iterate through the ENTIRE matrix. If not that, I would have to conjure up some overcomplicated way of finding all the coordinates using a matrix.</p><p>Enter: Linked Lists. I don&rsquo;t need to know where everything is. I just need to know where the important things are. Linked Lists would be the most intuitive way to track the snake. Conveniently, the linked list nodes can hold data (x,y coordinates) as well as references to the adjacent nodes. So, instead of having to iterate through N*M cells of the playing field, I just need to iterate through the length of the Snake to figure out where all the pieces are.</p><p>What this looks like&mldr;</p><div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">0
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#999;font-style:italic>// Doubly Linked List
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>struct</span> SnakeCell{
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>int</span> x;
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>int</span> y;
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell* next;
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell* prev;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Displaying the Snake is as trivial as iterating through the linked list and using each node&rsquo;s x,y data to populate a ncurses window. The following code describes how I initialised the Snake linked-list with an initial length of <code>initialSize</code>.</p><div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 0
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#999;font-style:italic>// Snake&#39;s head has been instantitated earlier on
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>struct</span> SnakeCell* <span style=color:#447fcf>init_snake</span>(WINDOW* window, <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell *head, <span style=color:#6ab825;font-weight:700>int</span> initialSize){
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell *cell = head;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Populate the linked list
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#6ab825;font-weight:700>while</span>(initialSize-- &gt; <span style=color:#3677a9>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell* newcell = malloc(<span style=color:#6ab825;font-weight:700>sizeof</span>(<span style=color:#6ab825;font-weight:700>struct</span> SnakeCell));
</span></span><span style=display:flex><span>        cell-&gt;prev = newcell;
</span></span><span style=display:flex><span>        newcell-&gt;next = cell;
</span></span><span style=display:flex><span>        newcell-&gt;x = cell-&gt;x-<span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>        newcell-&gt;y = cell-&gt;y;
</span></span><span style=display:flex><span>        cell = newcell;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Initialise the final node&#39;s prev pointer
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    cell-&gt;prev = <span style=color:#24909d>NULL</span>;
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Return the tail of the snake for manipulation later on
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell * tail = cell;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Populate the game window (ncurses)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#6ab825;font-weight:700>while</span>(cell != <span style=color:#24909d>NULL</span>){
</span></span><span style=display:flex><span>        mvwaddch(window, cell-&gt;y, cell-&gt;x, <span style=color:#ed9d13>&#39;#&#39;</span>);
</span></span><span style=display:flex><span>        cell = cell-&gt;next;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    wrefresh(window);
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> tail;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=how-do-i-handle-input-and-movement>How do I handle input and movement?</h2><p>The snake moves in 4 directions. The directions can be mapped to WASD/Arrow keys. I need to scan for these inputs and ignore any invalid key inputs. There&rsquo;s also a potential issue where the user accidentally makes the snake go &lsquo;backwards&rsquo;. Meaning, when the snake is moving up, the user inputs down, when the snake is moving left, the user inputs right. These inputs are also invalid as the snake will collide with itself and should be ignored.</p><p>To handle movement logic, I have two variables that deal with direction. <code>inertia</code> and <code>input</code>. The latter is the raw stdin input from the user and the former the Snake&rsquo;s last moved direction.</p><p>Parsing input: If we get a bad input, we ignore it and let the snake carry on with its current direction of motion (inertia!). Else, we update the snake&rsquo;s inertia.</p><div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 0
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#6ab825;font-weight:700>const</span> <span style=color:#6ab825;font-weight:700>int</span> DXN_UP = <span style=color:#3677a9>3</span>, DXN_DOWN = <span style=color:#3677a9>5</span>, DXN_LEFT = <span style=color:#3677a9>2</span>, DXN_RIGHT = <span style=color:#3677a9>4</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// inertia = parseInput(...);
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>int</span> <span style=color:#447fcf>parseInput</span>(<span style=color:#6ab825;font-weight:700>int</span> input, <span style=color:#6ab825;font-weight:700>int</span> inertia){
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Return -1 if quit is pressed 
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#999;font-style:italic>// UP/DOWN will always give a remainder of 1 when %2
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#999;font-style:italic>// L/R will always give a remainder of 0 when %2
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#999;font-style:italic>// Use this to check if the input should be ignored (snake carries on with its inertial dxn)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#6ab825;font-weight:700>switch</span>(input){
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#39;q&#39;</span>:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> -<span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#39;w&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> KEY_UP:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> (inertia%<span style=color:#3677a9>2</span> != <span style=color:#3677a9>0</span>)? inertia:DXN_UP;
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#39;s&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> KEY_DOWN:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> (inertia%<span style=color:#3677a9>2</span> != <span style=color:#3677a9>0</span>)? inertia:DXN_DOWN;
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#39;a&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> KEY_LEFT:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> (inertia%<span style=color:#3677a9>2</span> == <span style=color:#3677a9>0</span>)? inertia:DXN_LEFT;
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#39;d&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>case</span> KEY_RIGHT:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> (inertia%<span style=color:#3677a9>2</span> == <span style=color:#3677a9>0</span>)? inertia:DXN_RIGHT;
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>default</span>:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> inertia;
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>break</span>; 
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=how-do-i-increase-the-length-of-the-snake>How do I increase the length of the snake?</h2><p>This is a classic Linked List question. I need to create a new node and return it as a head.
In the context of Snake, when the snake needs to grow, it grows from the head in the direction of its inertia. I just allocate memory for the head, instantiate it and append it to the old head.</p><div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 0
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#6ab825;font-weight:700>struct</span> SnakeCell* <span style=color:#447fcf>add_snake_cell</span>(WINDOW* window, <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell *head, <span style=color:#6ab825;font-weight:700>int</span> inertia){
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic>// Returns the new head
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>    <span style=color:#6ab825;font-weight:700>struct</span> SnakeCell *newhead = malloc(<span style=color:#6ab825;font-weight:700>sizeof</span>(<span style=color:#6ab825;font-weight:700>struct</span> SnakeCell));
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>int</span> newx, newy;
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>if</span>(inertia == DXN_UP){
</span></span><span style=display:flex><span>        newhead-&gt;x = head-&gt;x;
</span></span><span style=display:flex><span>        newhead-&gt;y = head-&gt;y - <span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>    } <span style=color:#6ab825;font-weight:700>else</span> <span style=color:#6ab825;font-weight:700>if</span>(inertia == DXN_DOWN){
</span></span><span style=display:flex><span>        newhead-&gt;x = head-&gt;x;
</span></span><span style=display:flex><span>        newhead-&gt;y = head-&gt;y + <span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>    } <span style=color:#6ab825;font-weight:700>else</span> <span style=color:#6ab825;font-weight:700>if</span>(inertia == DXN_LEFT){
</span></span><span style=display:flex><span>        newhead-&gt;x = head-&gt;x - <span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>        newhead-&gt;y = head-&gt;y;
</span></span><span style=display:flex><span>    } <span style=color:#6ab825;font-weight:700>else</span> <span style=color:#6ab825;font-weight:700>if</span>(inertia == DXN_RIGHT){
</span></span><span style=display:flex><span>        newhead-&gt;x = head-&gt;x + <span style=color:#3677a9>1</span>;
</span></span><span style=display:flex><span>        newhead-&gt;y = head-&gt;y;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    head-&gt;next = newhead;
</span></span><span style=display:flex><span>    newhead-&gt;prev = head;
</span></span><span style=display:flex><span>    mvwaddch(window, newhead-&gt;y, newhead-&gt;x, <span style=color:#ed9d13>&#39;#&#39;</span>);
</span></span><span style=display:flex><span>    wrefresh(window);
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> newhead;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>These are just some parts of the code I feel are interesting in relation to the usage of Linked Lists. If you know C/C++ and are interested in building GUI-like terminal applications, do give <code>ncurses</code> a try! It allowed this snake game to be made, and has birthed many utilities such a <code>htop</code> and <code>nano</code>.</p></div></div></section></main></div><footer class=footer><div><p class=footertext style=color:#f0f8ff;font-family:MainTitle;align-self:center>Powered by
<a href=https://gohugo.io/ target=_blank style=color:var(--color-link)><span>Hugo</span></a></p></div><div class=footertext style=font-family:MainTitle;align-self:center><a href=https://nichyjt.github.io/attributions/ style=color:var(--color-link)><span>Attributions & üç™</span></a></div><div><p class=footertext class=footertext style=color:#f0f8ff;font-family:MainTitle;align-items:center>Made with ‚ù§Ô∏è - <a href=https://github.com/nichyjt/ target=_blank , style=color:var(--color-link)>nichyjt</a></p></div><div class=footertext style=color:#f0f8ff;font-family:MainTitle;align-self:center>¬© 2021 - 2022 Nicholas Yek</div><div class=fontloader></div></footer></body><script>document.body.classList.add(localStorage.getItem("theme"))</script></html>